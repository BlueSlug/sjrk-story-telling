# Infusion grades defined in this project
- `sjrk.dynamicViewComponentManager` handles the dynamic creation, manipulation and removal of dynamic components from a given DOM container. It will automatically register and un-register view components with itself.
- `sjrk.storyTelling.templateManager` renders [handlebars](https://handlebarsjs.com/) templates to HTML, substituting in localized messages as well as any dynamic values to be included.
  - Template and message bundle options are configured at `{that}.options.templateConfig`
  - Localized messages are loaded to the key `{that}.options.templateStrings.localizedMessages`
  - Localization of content is specified at `{that}.options.templateConfig.locale`, but this is set at the highest level by the `uiManager` (more on this below)
- `sjrk.storyTelling.binder` is an implementation of [`gpii.binder`](https://github.com/GPII/gpii-binder) that links DOM elements to model values and provides a couple of events to tie into the `ui` grade (see below).
- `sjrk.storyTelling.story` is the data model for all stories. It contains metadata and content in the form of individual story block contents (see below for more on blocks).
- `sjrk.storyTelling.ui` can be used to set up UI contexts (pages or parts of a page).
- `sjrk.storyTelling.block` and its derivatives represent a part of the content of a story, and each block has a type related to its use and presentation:
    - `sjrk.storyTelling.block.textBlock` is for text content
    - `sjrk.storyTelling.block.imageBlock` is for graphical content (images, photos, etc.)
    - `sjrk.storyTelling.block.timeBased` is for time-based content that generally use a media player:
        - `sjrk.storyTelling.block.audioBlock` is for audio content
        - `sjrk.storyTelling.block.videoBlock` is for video content
- `sjrk.storyTelling.blockUi`, much like the `ui` grade, provides a user interface for a given individual block. Each `blockUi` has `templateManager` to load its unique template and messages and `block` components (one each) and manages communication between the two.
- Grades for block viewing `blockUI`'s: `sjrk.storyTelling.blockUi.audioBlockViewer`, `sjrk.storyTelling.blockUi.imageBlockViewer`, `sjrk.storyTelling.blockUi.textBlockViewer` and `sjrk.storyTelling.blockUi.videoBlockViewer`
- `sjrk.storyTelling.blockUi.timeBased` for the common shared controls related to playback of audio and video media
- `sjrk.storyTelling.blockUi.editor` is for setting up a user interface to edit a block. Not much use on its own, though it represents the shared elements for the different block type editors. This file also contains some basic configuration to enable the detection of cameras on mobile devices, with specific implementations being handled by the particular editor grades. The current editor grades are:
    - `sjrk.storyTelling.blockUi.editor.textBlockEditor` for text blocks
    - `sjrk.storyTelling.blockUi.editor.imageBlockEditor` for image blocks. This grade also has some additional configuration which uses context awareness to determine whether to load a slightly different editor that can capture from a camera.
    - `sjrk.storyTelling.blockUi.editor.mediaBlockEditor` for time-based media types:
        - `sjrk.storyTelling.blockUi.editor.audioBlockEditor` for audio blocks
    - `sjrk.storyTelling.blockUi.editor.videoBlockEditor` for video blocks. Also contains mobile camera detection
- `sjrk.storyTelling.ui.storyEditor` is an extension of `ui` that provides an editing interface for stories. It has a handlebars template associated with it called `storyEditor.handlebars`. It also contains a `sjrk.storyTelling.binder` to link up with the title, author and keywords fields. It makes use of a `dynamicViewComponentManager` to add blocks of varying types on demand.
- `sjrk.storyTelling.ui.storyViewer` is similar to the `storyEditor`, except it doesn't have a binder since its purpose is to preview a story after editing. Its handlebars template is `storyViewer.handlebars`.
- `sjrk.storyTelling.ui.storyBrowser` is shows a list of all the stories in the database. Its handlebars template is `storyBrowse.handlebars`.
- `sjrk.storyTelling.page` represents a single HTML page, including all interactions within that page. It is the highest-level interface management grade. It has:
    - a `fluid.textToSpeech` component called *storySpeaker* for reading out various content on demand,
    - a `fluid.prefs.cookieStore` for storing site preferences,
    - a `ui` grade called *menu* for top-level links and controls, with an associated template called `menu.handlebars`.
    - a component for UIO with some associated events to dynmically redraw the page contents when the language is changed, and
    - a component for each `ui` in the tool and manages communication of relevant information between them.
- `sjrk.storyTelling.page.storyBrowse` for the Browse page, has a `storyBrowser`
- `sjrk.storyTelling.page.storyView` for the Browse page, has a `storyViewer`
- `sjrk.storyTelling.page.storyBrowse` for the Edit page, has a `storyEditor` and a `storyViewer` which together form the story authoring environment. This file also contains some events, listeners and functions to handle story submission to the database
- `sjrk.storyTelling.block.singleFileUploader` provides some wiring for the Edit page to upload files to the server
